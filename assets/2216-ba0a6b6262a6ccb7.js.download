try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e2f0d014-3506-4324-8019-8fd318ce02d1",e._sentryDebugIdIdentifier="sentry-dbid-e2f0d014-3506-4324-8019-8fd318ce02d1")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2216],{4821:(e,t,r)=>{r.d(t,{B:()=>n,S:()=>o});let i=()=>{},o=e=>{i(e)},n=e=>i=e},7307:(e,t,r)=>{r.d(t,{Q:()=>o});var i=r(34477);let o=(0,i.createServerReference)("406f8697d880446f65feeacc85ab94a969a49f9ded",i.callServer,void 0,i.findSourceMapURL,"fetchSubscriptionInfo")},9962:(e,t,r)=>{r.d(t,{j:()=>n,u:()=>o});let i={value:"",name:"yw_id",path:"/",sameSite:"lax",secure:!0,httpOnly:!1,maxAge:31536e3};function o(e){let{name:t,path:r,sameSite:o,secure:n,httpOnly:s,maxAge:a}=i;document.cookie="".concat(t,"=").concat(e,"; Path=").concat(r,"; SameSite=").concat(o,"; ").concat(n?"Secure;":""," ").concat(s?"HttpOnly;":""," Max-Age=").concat(a)}function n(){var e,t;return{client_id:(null===(e=document.cookie.split("; ").find(e=>e.startsWith("client_id=")))||void 0===e?void 0:e.split("=")[1])||"",yw_id:(null===(t=document.cookie.split("; ").find(e=>e.startsWith("yw_id=")))||void 0===t?void 0:t.split("=")[1])||""}}},13960:(e,t,r)=>{r.d(t,{R:()=>h,SubscriptionProvider:()=>d});var i=r(95155),o=r(35695),n=r(12115),s=r(7307),a=r(84842),l=r(62128),c=r(53568);let u=(0,n.createContext)({subscriptionInfo:null,loading:!1,error:null,getSubscriptionInfo:async()=>{}}),d=e=>{let{children:t}=e,[r,d]=(0,n.useState)(null),[h,g]=(0,n.useState)(!1),[f,p]=(0,n.useState)(null),v=(0,o.usePathname)(),{user:w}=(0,c.A)();(0,n.useEffect)(()=>{(null==w?void 0:w.uid)?["/legal","/login","/push","/subscription"].some(e=>v.startsWith(e))||r||m():d(null)},[v,null==w?void 0:w.uid,r]),(0,n.useEffect)(()=>{if(w){let e=a.X.onMessage("SubscriptionUpdated",()=>{l.Ay.trace("Received subscription update from another tab"),m().catch(e=>{l.Ay.error("Error syncing subscription after broadcast",e)})}),t=a.X.onMessage("CreditsUpdated",()=>{l.Ay.trace("Received credits update from another tab"),m().catch(e=>{l.Ay.error("Error syncing subscription after broadcast",e)})});return()=>{e(),t()}}},[w]);let m=async e=>{if(w&&!h)try{var t;g(!0),p(null);let r=await (0,s.Q)(e);if(0===r.code&&(null===(t=r.data)||void 0===t?void 0:t.subscription))d(r.data.subscription),l.Ay.info("Subscription info refreshed successfully",{subscriptionInfo:r.data});else throw Error(r.message||"Failed to fetch subscription info")}catch(e){p(e instanceof Error?e.message:"Unknown error occurred"),l.Ay.error("Error refreshing subscription info:",e)}finally{g(!1)}};return(0,i.jsx)(u.Provider,{value:{subscriptionInfo:r,loading:h,error:f,getSubscriptionInfo:m},children:t})},h=()=>(0,n.useContext)(u)},40249:(e,t,r)=>{r.d(t,{G:()=>l});var i=r(20996),o=r(34477);let n=(0,o.createServerReference)("7f3f27b947a5255dd02a6fd114a34ecec99e822825",o.callServer,void 0,o.findSourceMapURL,"subscribe"),s=(0,o.createServerReference)("7f3c45bdfb1ab203007246abef0807fb935e65d90f",o.callServer,void 0,o.findSourceMapURL,"unsubscribe");class a{async setup(){try{if(!await (0,i.TT)()){console.warn("Firebase messaging is not supported in this browser.");return}this.messaging=(0,i.dG)(),await this.setupMessageListener()}catch(e){console.error("Failed to setup Firebase messaging:",e)}}async permission(){try{if(!await (0,i.TT)())return"denied";return Notification.permission}catch(e){return console.error("Failed to get notification permission:",e),"denied"}}async requestPermission(){try{if(!await (0,i.TT)())return"denied";return await Notification.requestPermission()}catch(e){return console.error("Failed to request notification permission:",e),"denied"}}async getToken(){try{if(!await (0,i.TT)()||!this.messaging)return null;return await (0,i.gf)(this.messaging,{vapidKey:"BFzCzbuMre8R3RC_h9JeqPcMY8ZXoZxnIy5grDoBalpmvZjYVoqe9ojkkLtDx45beFhy3g6C83Kbb7pvX-A8GU8"})}catch(e){return console.error("Failed to get FCM token:",e),null}}async subscribe(){try{if(!await (0,i.TT)()||!this.messaging||await this.permission()!=="granted")return!1;let e=await this.getToken();if(!e)return!1;return await n(e),!0}catch(e){return console.error("Failed to subscribe to push notifications:",e),!1}}async unsubscribe(){try{if(!await (0,i.TT)()||!this.messaging)return!1;let e=await this.getToken();if(!e)return!1;return await s(e),!0}catch(e){return console.error("Failed to unsubscribe from push notifications:",e),!1}}registerMessageHandler(e){this.messageHandlers.push(e)}unregisterMessageHandler(e){let t=this.messageHandlers.indexOf(e);t>-1&&this.messageHandlers.splice(t,1)}async setupMessageListener(){try{if(!await (0,i.TT)()||!this.messaging)return;(0,i.xD)(this.messaging,e=>{console.log("=== FOREGROUND MESSAGE RECEIVED ==="),console.log("Foreground message received:",e),this.messageHandlers.forEach(t=>{try{t(e)}catch(e){console.error("Error in message handler:",e)}})})}catch(e){console.error("Failed to setup message listener:",e)}}constructor(){this.messageHandlers=[]}}let l=new a},48436:(e,t,r)=>{let i;r.d(t,{B:()=>s,P:()=>n});let o=()=>{},n=e=>{clearTimeout(i),o(e),i=setTimeout(()=>{(null==e?void 0:e.message)===e.message&&o(null)},e.duration||3e3)},s=e=>o=e},53568:(e,t,r)=>{let i,o;r.d(t,{AuthProvider:()=>A,A:()=>P});var n=r(95155),s=r(62105),a=r(16203),l=r(35695),c=r(12115),u=r(34477);let d=(0,u.createServerReference)("60a8a1d7b76b028e9bf52155eb1abb4a747ce2827b",u.callServer,void 0,u.findSourceMapURL,"login"),h=(0,u.createServerReference)("40a09a89dce0e1b23be9cbf28910d9ee7afc6370e5",u.callServer,void 0,u.findSourceMapURL,"fetchInviteInfo"),g=(0,u.createServerReference)("403d795df721b4ab0b4147576234222d98e414aecc",u.callServer,void 0,u.findSourceMapURL,"linkProjects");var f=r(56389),p=r(9962),v=r(23915);let w=(0,u.createServerReference)("00b825ebf0c0f04721726aadfa9eebd9ce3f069994",u.callServer,void 0,u.findSourceMapURL,"logout");var m=r(40249);let y=JSON.parse('{"apiKey":"AIzaSyB9Jdqpb4h5RgHmRRJSfqTOfBT-DPV34jA","authDomain":"gglogin.youware.com","projectId":"yourware-arco","storageBucket":"yourware-arco.firebasestorage.app","messagingSenderId":"541265544701","appId":"1:541265544701:web:d52622395895582c9c4594"}');function b(){if(!o){let{auth:e}=y?(i=(0,v.Dk)().length?(0,v.Dk)()[0]:(0,v.Wp)(y),o=(0,a.xI)(i),(0,a.oM)(o,a.gz),m.G.setup(),{app:i,auth:o}):(console.error("firebaseConfig is undefined"),{app:void 0,auth:void 0});o=e}return o}async function S(){let e=b();if(!e)throw console.error("auth is undefined"),Error("auth is undefined");try{return await e.signOut(),console.log("sign out successfully"),await w()}catch(e){throw console.error("sign out error:",e),e}}var _=r(62128),E=r(96834);let k=(0,c.createContext)({user:null,googleLoginLoading:!1,loginWithGoogle:async()=>{},loginWithGoogleOneTap:async e=>{},sendLinkToEmail:async(e,t)=>{},signInWithEmailLink:async(e,t)=>{},isSignInWithEmailLink:e=>!1,logout:async()=>{},updateProfile:async(e,t)=>Promise.resolve({code:0,message:"Success",request_id:"",data:null}),inviteCode:null,inviterInfo:null,inviteLoading:!1,inviteError:null,hasInvited:!1,asyncCheckShouldShowInvite:async()=>!1,trackTriggerLogin:()=>{},trackLoginResult:()=>{}}),A=e=>{let{currentUser:t,children:r}=e,[i,o]=(0,c.useState)(t),[u,v]=(0,c.useState)(!1),[w,m]=(0,c.useState)(null),[y,A]=(0,c.useState)(null),[P,I]=(0,c.useState)(!1),[L,T]=(0,c.useState)(null),[F,C]=(0,c.useState)(!1),R=b(),j=new a.HF,{identify:N,track:O}=(0,f.s)(),M=(0,l.useSearchParams)();(0,c.useEffect)(()=>{var e;let t=null===(e=(0,p.j)())||void 0===e?void 0:e.yw_id;!t&&(null==i?void 0:i.ywid)&&(0,p.u)(i.ywid),N(i),t&&window.gtag&&window.gtag("config","G-6Z2G4L6M8E",{user_id:t}),s.gV({id:t,...i&&{username:i.display_name}})},[i]),(0,c.useEffect)(()=>{i&&w&&C(!0)},[i]),(0,c.useEffect)(()=>{let e=M.get("invite_code");e&&e!==w&&(m(e),_.Ay.info("Found invite code in URL",{invite_code:e}),I(!0),T(null),h(e).then(e=>{0===e.code&&e.data?(A(e.data),_.Ay.info("Fetched inviter info",{inviter_info:e.data})):(T("Failed to fetch inviter information"),_.Ay.error("Failed to fetch inviter info",Error("API error: ".concat(e.code))))}).catch(e=>{T("Error fetching inviter information"),_.Ay.error("Error fetching inviter info",e)}).finally(()=>{I(!1)}))},[M,w]);let q=async()=>{try{if(v(!0),!R)throw _.Ay.error("auth is undefined"),Error("auth is undefined");j.setCustomParameters({prompt:"select_account"}),j.addScope("https://www.googleapis.com/auth/userinfo.profile");let e=await (0,a.df)(R,j);if(await R.signOut(),!e)throw Error("Failed to login");await J(e);let t=await H(e,w||"");o(t),W(t.uid),_.Ay.info("sign in with google success")}catch(e){throw _.Ay.error("sign in with google error",e),e}finally{v(!1)}},x=async(e,t)=>{if(!R)throw _.Ay.error("auth is undefined"),Error("auth is undefined");try{let r=await (0,a.hK)(R,e,t);if(await R.signOut(),!r)throw Error("Failed to sign in with email link");let i=await H(r,w||"");o(i),W(i.uid),_.Ay.info("sign in with email link success",{loginUser:i})}catch(e){throw _.Ay.error("sign in with email link error",e),e}finally{window.localStorage.removeItem("emailForSignIn")}},z=async(e,t)=>{try{if(_.Ay.info("login with email"),!R)throw _.Ay.error("auth is undefined"),Error("auth is undefined");await (0,a.MN)(R,e,{url:t,handleCodeInApp:!0}),_.Ay.info("send sign in link to email success")}catch(e){throw _.Ay.error("send sign in link to email error:",e),e}},D=async e=>{try{if(!R)throw _.Ay.error("auth is undefined"),Error("auth is undefined");let t=a.HF.credential(e),r=await (0,a.eN)(R,t);if(await R.signOut(),!r)throw Error("Failed to login with Google One Tap");await J(r);let i=await H(r,w||"");o(i),W(i.uid),_.Ay.info("sign in with Google One Tap success")}catch(e){throw _.Ay.error("sign in with Google One Tap error",e),e}},G=async()=>{try{console.log("sign out"),await S(),o(null)}catch(e){throw console.error("sign out error:",e),e}},U=async(e,t)=>{try{let r=new FormData;return e&&r.append("name",e),t&&r.append("photo",t),await (0,E.qM)("/user/refresh",{method:"POST",body:r})}catch(e){throw _.Ay.error("update profile error:",e),e}},J=async e=>{let t=e.user;_.Ay.info("sync google user profile",{user:t});let r=t.providerData.find(e=>"google.com"===e.providerId);if(_.Ay.info("sync google providerInfo",{providerInfo:r}),r){let{displayName:e,photoURL:i}=r;if(!t.displayName&&e&&await (0,a.r7)(t,{displayName:e}),!t.photoURL&&i){let e=i.replace(/=s\d+-c$/,"=s400-c");await (0,a.r7)(t,{photoURL:e})}}},H=async(e,t)=>{var r;let i=e.user;_.Ay.info("sync user to server",{user:i});let o=await i.getIdToken(),n=await d(o,t);if(200!==n.code||!(null===(r=n.data)||void 0===r?void 0:r.userInfo))throw Error("sync user to server failed");return n.data.userInfo},W=async e=>{if(_.Ay.info("handle anonymous projects"),e){let t=JSON.parse(localStorage.getItem("Anonymous_Projects")||"[]");if(t.length>0)try{g({uid:e,project_ids:t}),localStorage.removeItem("Anonymous_Projects"),_.Ay.info("Projects linked successfully in background")}catch(e){_.Ay.error("Background project linking failed:",e)}}},B=async()=>new Promise(e=>{let t=null!==M.get("invite_code")&&!i&&!F;e(null!=t&&t)});return(0,n.jsx)(k.Provider,{value:{user:i,googleLoginLoading:u,loginWithGoogle:q,loginWithGoogleOneTap:D,sendLinkToEmail:z,isSignInWithEmailLink:e=>R?(0,a.Pj)(R,e):(_.Ay.error("auth is undefined"),!1),signInWithEmailLink:x,logout:G,updateProfile:U,inviteCode:w,inviterInfo:y,inviteLoading:P,inviteError:L,hasInvited:F,asyncCheckShouldShowInvite:B,trackTriggerLogin:(e,t)=>{var r;O("login_continue_button_click",{login_platform:e,enter_from:t,inviter_user_id:(null==y?void 0:null===(r=y.user)||void 0===r?void 0:r.uid)||""})},trackLoginResult:(e,t,r,i)=>{var o;O("login_status",{login_platform:e,result:t,fail_reason:i,enter_from:r,inviter_user_id:(null==y?void 0:null===(o=y.user)||void 0===o?void 0:o.uid)||""})}},children:r})},P=()=>(0,c.useContext)(k)},56389:(e,t,r)=>{r.d(t,{s:()=>n});var i=r(12115),o=r(99891);function n(){let e=(0,i.useContext)(o.I);if(!e)throw Error("useAnalytics must be used within AnalyticsProvider");return{track:(0,i.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.track(t,r)},[e]),trackGoogleAds:(0,i.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.trackGoogleAds(t,r)},[e]),registerPublicProperties:(0,i.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.registerPublicProperties(t)},[e]),identify:(0,i.useCallback)(t=>{e.identify(t)},[e]),inject:(0,i.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.inject(t)},[e])}}},62128:(e,t,r)=>{r.d(t,{Ay:()=>s,tZ:()=>n,vF:()=>o});class i{static getInstance(e){let t=(null==e?void 0:e.moduleName)||"youware";if(i.instances.has(t)){if(e){let r=i.instances.get(t);r.options={...r.options,...e}}}else i.instances.set(t,new i(e));return i.instances.get(t)}setLevel(e){this.currentLevel=e}getLevel(){return this.currentLevel}setOptions(e){this.options={...this.options,...e}}formatLogEntryAsJson(e,t){let r=this.formatArgs(t),i={timestamp:new Date().toISOString(),level:e,message:r,..."youware"!==this.moduleName&&{module:this.moduleName},metadata:{environment:"production"}},o=t.find(e=>e instanceof Error);return o&&(i.error={name:o.name,message:o.message,stack:o.stack}),JSON.stringify(i,null,void 0)}formatLogEntryAsPretty(e,t){let r=new Date(new Date().getTime()+288e5).toISOString().replace("T"," ").replace("Z",""),i="";this.options.useSymbols&&(i+="".concat(this.symbols[e]," "));let o=this.formatArgs(t);i+="[".concat(r,"] [").concat(e.toUpperCase(),"]").concat("youware"!==this.moduleName?" [".concat(this.moduleName,"]"):""," ").concat(o);let n=t.find(e=>e instanceof Error);return n&&(i+="\n  └─ 错误: ".concat(n.name," - ").concat(n.message),n.stack&&(i+="\n      ".concat(n.stack.split("\n").slice(1).join("\n      ")))),i}formatValue(e){if(e instanceof Error)return"".concat(e.name,": ").concat(e.message);if("object"==typeof e&&null!==e){if(Array.isArray(e))return 0===e.length?"[]":1===e.length?"[".concat(this.formatValue(e[0]),"]"):JSON.stringify(e);try{return JSON.stringify(e)}catch(e){return"[Object]"}}return String(e)}formatArgs(e){return 0===e.length?"":e.map(e=>"string"==typeof e?e:this.formatValue(e)).join(" ")}formatLogEntry(e,t){return"raw"===this.options.format?t:"json"===this.options.format?this.formatLogEntryAsJson(e,t):this.formatLogEntryAsPretty(e,t)}sendToSentry(e,t){if(this.options.enableSentryReporting&&("info"===e||"warn"===e||"error"===e))try{r.e(1276).then(r.bind(r,51276)).then(r=>{let{logger:i}=r,o=this.formatArgs(t),n={module:"youware"!==this.moduleName?this.moduleName:void 0,timestamp:new Date().toISOString(),environment:"browser"},s=t.find(e=>e instanceof Error);s&&(n.error={name:s.name,message:s.message,stack:s.stack}),"info"===e?i.info(o,n):"warn"===e?i.warn(o,n):"error"===e&&i.error(o,n)}).catch(()=>{})}catch(e){}}outputLog(e,t){if("raw"===this.options.format&&Array.isArray(t)){let r="youware"!==this.moduleName?"[".concat(this.moduleName,"]"):"";switch(e){case"trace":case"debug":r?console.debug(r,...t):console.debug(...t);break;case"info":r?console.info(r,...t):console.info(...t);break;case"warn":r?console.warn(r,...t):console.warn(...t);break;case"error":r?console.error(r,...t):console.error(...t)}}else switch(e){case"trace":case"debug":console.debug(t);break;case"info":console.info(t);break;case"warn":console.warn(t);break;case"error":console.error(t)}}trace(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.currentLevel<=0){let e=this.formatLogEntry("trace",t);this.outputLog("trace",e)}}debug(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.currentLevel<=1){let e=this.formatLogEntry("debug",t);this.outputLog("debug",e)}}info(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.currentLevel<=2){let e=this.formatLogEntry("info",t);this.outputLog("info",e),this.sendToSentry("info",t)}}warn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.currentLevel<=3){let e=this.formatLogEntry("warn",t);this.outputLog("warn",e),this.sendToSentry("warn",t)}}error(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.currentLevel<=4){let e=this.formatLogEntry("error",t);this.outputLog("error",e),this.sendToSentry("error",t)}}constructor(e){this.options={useSymbols:!0,format:"pretty"},this.symbols={trace:"\uD83D\uDD0D",debug:"\uD83D\uDD27",info:"ℹ️",warn:"⚠️",error:"❌"},this.moduleName=(null==e?void 0:e.moduleName)||"youware",e&&(this.options={...this.options,...e}),this.options.format="raw","https://www.yourware.so".includes("staging")||"https://www.youware.com".includes("staging")?this.currentLevel=0:this.currentLevel=2,void 0===this.options.enableSentryReporting&&(this.options.enableSentryReporting=!0)}}i.instances=new Map;let o=i.getInstance(),n=(e,t)=>i.getInstance({...t,moduleName:e}),s=o},66139:(e,t,r)=>{function i(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];{let r=window.location.host;if(r.includes("localhost"))return"http://"+r;if(o(r)&&e&&t)return"https://"+r.replace(".yourware.so",".youware.com");if(r.includes("yourware.so")&&!e)return"https://www.yourware.so"}return"https://www.youware.com"}r.d(t,{$:()=>i});let o=e=>null!==((null==e?void 0:e.match(/^([^.]+)\.app(-staging\d*)?\.yourware\.so$/))||(null==e?void 0:e.match(/^([^.]+)\.app(-staging\d*)?\.youware\.com$/)))},68192:(e,t,r)=>{r.d(t,{PushProvider:()=>f,xy:()=>h,e6:()=>p});var i=r(95155),o=r(12115),n=r(53568),s=r(56389),a=r(90239),l=r(40249);let c=()=>{let[e,t]=(0,o.useState)(null),{user:r}=(0,n.A)(),i=async()=>{let e=await l.G.requestPermission();t(e),"granted"===e&&a()},s=async()=>{let e=await l.G.permission();t(e),"granted"===e&&a()},a=async()=>{r&&l.G.subscribe()},c=async()=>{r&&l.G.unsubscribe()};return(0,o.useEffect)(()=>{let e;return s(),(async()=>{if("permissions"in navigator)try{let e=await navigator.permissions.query({name:"notifications"}),r=()=>{console.log("Notification permission changed:",e.state),t(e.state)};return e.addEventListener("change",r),()=>{e.removeEventListener("change",r)}}catch(e){console.log("Permissions API not supported or failed:",e)}})().then(t=>{e=t}),()=>{null==e||e()}},[r]),{permissionState:e,requestPermission:i,unsubscribe:c}},u="yw_notification_tips_key",d="yw_create_tips_key",h=15e3,g=(0,o.createContext)({requestPermission:()=>{},shouldShowNotificationTips:()=>!1,shouldShowCreateTips:()=>!1,handleCreateTipsAction:()=>{},handleNotificationTipsAction:()=>{},saveCreateTipsShowTime:()=>{},unsubscribe:()=>{}}),f=e=>{let{children:t}=e,{requestPermission:r,permissionState:h,unsubscribe:f}=c(),{user:p}=(0,n.A)(),{inject:v,track:w}=(0,s.s)(),m=(0,a.I)(!1,840);(0,o.useEffect)(()=>{!m&&v({enable_push:null!=h?h:"default"})},[h]);let y=e=>{var t;w("browser_notification_sent",{notification_type:null!==(t=({remix:"remix",reaction:"emoji_reaction",save:"favorite",comment:"comment",task_update:"task_update",system:"official"})[e])&&void 0!==t?t:void 0})},b=(0,o.useCallback)(async e=>{var t,r,i,o;if(console.log("Processing foreground message in PushContext:",e),!await S(e)||await l.G.permission()!=="granted")return;let n=(null===(t=e.data)||void 0===t?void 0:t.title)||"YouWare New Message",s={body:(null===(r=e.data)||void 0===r?void 0:r.body)||"You have a new message",icon:"/images/chrome-push-icon.png",tag:"yourware-foreground",requireInteraction:!1,data:{url:(null===(i=e.data)||void 0===i?void 0:i.target_url)||"https://www.youware.com"}};y(null===(o=e.data)||void 0===o?void 0:o.type);let a=new Notification(n,s);a.onclick=()=>{var t;console.log("Foreground notification clicked"),window.focus();let r=null===(t=e.data)||void 0===t?void 0:t.target_url;r&&(window.location.href=r),a.close()}},[]),S=(0,o.useCallback)(async e=>{var t;return!((null===(t=e.data)||void 0===t?void 0:t.type)!=="create"||window.location.href.includes("/editor")&&window.document.hasFocus()&&"visible"===document.visibilityState)},[]);return(0,o.useEffect)(()=>(l.G.registerMessageHandler(b),()=>{l.G.unregisterMessageHandler(b)}),[b]),(0,i.jsx)(g.Provider,{value:{shouldShowNotificationTips:()=>!m&&!(!p||null!==h&&"default"!==h||localStorage.getItem(u)),requestPermission:r,shouldShowCreateTips:()=>!m&&!!p&&(null===h||"default"===h)&&!localStorage.getItem(d),handleCreateTipsAction:e=>{let t;let r=localStorage.getItem(d);t=r?JSON.parse(r):{enable:!1,last_show_time:0,already_show_count:0},"not_now"===e||"time_out"===e?(t.enable=!1,t.last_show_time=Date.now(),t.already_show_count++):"allow"===e&&(t.enable=!0,t.last_show_time=Date.now(),t.already_show_count++),localStorage.setItem(d,JSON.stringify(t))},handleNotificationTipsAction:()=>{localStorage.setItem(u,"1")},saveCreateTipsShowTime:()=>{let e;let t=localStorage.getItem(d);(e=t?JSON.parse(t):{enable:!1,last_show_time:0,already_show_count:0}).last_show_timestamp=Date.now(),localStorage.setItem(d,JSON.stringify(e))},unsubscribe:f},children:t})},p=()=>(0,o.useContext)(g)},84842:(e,t,r)=>{r.d(t,{X:()=>n});var i=r(62128);class o{onMessage(e,t){this.listeners.has(e)||this.listeners.set(e,new Set);let r=this.listeners.get(e);return r.add(t),i.vF.trace('Subscribed to event "'.concat(e,'"'),{listenersCount:r.size}),()=>{let r=this.listeners.get(e);r&&(r.delete(t),i.vF.trace('Unsubscribed from event "'.concat(e,'"'),{remainingListeners:r.size}),0===r.size&&(this.listeners.delete(e),i.vF.trace('Removed event "'.concat(e,'" as it has no more listeners'))))}}sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var o;let n={event:e,data:t,timestamp:Date.now()};if(i.vF.trace('send message to channel "'.concat(e,'"'),{data:t,triggerLocal:r}),null===(o=this.channel)||void 0===o||o.postMessage(n),r){let r=this.listeners.get(e);r&&r.size>0&&(i.vF.trace("Triggering ".concat(r.size,' local listeners for event "').concat(e,'"'),{data:t}),r.forEach(e=>{e(t)}))}}catch(t){i.vF.error("Error send message to channel (".concat(e,"):"),t)}}handleMessage(e){try{let{event:t,data:r}=e.data;i.vF.trace('Received message from another tab for event "'.concat(t,'"'),{data:r});let o=this.listeners.get(t);o&&o.size>0&&(i.vF.trace("Notifying ".concat(o.size,' listeners for event "').concat(t,'"'),{data:r}),o.forEach(e=>{e(r)}))}catch(e){i.vF.error("Error handling broadcast message:",e)}}cleanup(){try{this.channel&&(i.vF.trace("Closing broadcast channel"),this.channel.close(),this.channel=null),this.listeners.clear(),i.vF.trace("Cleared all listeners")}catch(e){i.vF.error("Error during cleanup:",e)}}constructor(e){this.channel=null,this.listeners=new Map;try{this.channel=new BroadcastChannel(e||"global_broadcast"),this.channel.onmessage=this.handleMessage.bind(this)}catch(e){i.vF.error("Failed to initialize BroadcastChannel:",e)}}}let n=new o},90063:(e,t,r)=>{r.d(t,{A:()=>s});var i=r(62128),o=r(9962);class n{init(){return i.vF.trace("Volcano initialized"),Promise.resolve()}track(e,t){window.collectEvent&&window.collectEvent(e,t)}registerPublicProperties(e){window.collectEvent&&(window.collectEvent("config",e),window.collectEvent("send"))}identify(e){let{yw_id:t=""}=(0,o.j)()||{};window.collectEvent&&(e?(window.collectEvent("config",{user_unique_id:t||e.ywid,user_is_login_yw:1}),window.collectEvent("profileSet",{user_anonymous:e.is_anonymous,user_name:e.display_name,user_is_subscribed:+("Pro"===e.plan)})):(window.collectEvent("config",{user_unique_id:t||null,user_is_login_yw:0}),window.collectEvent("profileSet",{user_unique_id:"",user_anonymous:"",user_name:"",user_is_subscribed:null})),window.collectEvent("start"))}}class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}async init(){this.initialized||(this.providers=[new n],await Promise.allSettled(this.providers.map(e=>e.init())),this.initialized=!0,i.vF.trace("Initialized"),this.processQueue())}track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={...this.commonProperties,...t};if(!this.initialized){this.queueOperation({type:"track",event:e,properties:r});return}this.providers.forEach(t=>{/(staging|localhost)/.test("https://www.yourware.so")&&/(staging|localhost)/.test("https://www.youware.com")?t instanceof n&&(t.track(e,r),console.log("Tracking event",e,r)):t.track(e,r)})}trackGoogleAds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.gtag&&window.gtag("event",e,t)}registerPublicProperties(e){if(!this.initialized){this.queueOperation({type:"registerPublicProperties",properties:e});return}this.providers.forEach(t=>{t.registerPublicProperties(e)})}identify(e){if(!this.initialized){this.queueOperation({type:"identify",userInfo:e});return}this.providers.forEach(t=>{t.identify(e)})}inject(e){this.commonProperties={...this.commonProperties,...e}}queueOperation(e){this.operationQueue.push(e)}processQueue(){this.operationQueue.forEach(e=>{try{switch(e.type){case"track":this.providers.forEach(t=>{t.track(e.event,e.properties)});break;case"identify":this.providers.forEach(t=>{t.identify(e.userInfo)});break;case"registerPublicProperties":this.providers.forEach(t=>{t.registerPublicProperties(e.properties)})}}catch(t){i.vF.error("Error processing queued operation: ".concat(e.type),t)}}),this.operationQueue=[]}constructor(){this.initialized=!1,this.operationQueue=[],this.providers=[],this.commonProperties={}}}},90239:(e,t,r)=>{r.d(t,{I:()=>o});var i=r(12115);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:480,[r,o]=(0,i.useState)(e);return(0,i.useEffect)(()=>{let e=()=>{o(window.innerWidth<=t)};if(e(),"undefined"==typeof ResizeObserver)return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)};{let t=new ResizeObserver(()=>{e()});return t.observe(document.body),()=>{t.disconnect()}}},[t]),r}},96834:(e,t,r)=>{r.d(t,{qM:()=>s});var i=r(23464),o=r(66139);let n=i.A.create({baseURL:"http://yourware-backend-prod.yourware-service-discovery-prod:8000",timeout:6e4});n.interceptors.request.use(async e=>(e.headers["Content-Type"]||(e.headers["Content-Type"]="application/json"),e),e=>Promise.reject(e)),n.interceptors.response.use(e=>e.data,e=>{var t,r,i,o,n,s,a,l,c,u;return e.mock&&e.data?e.data:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.status_code)?Promise.reject(e.response.data):Promise.reject({status_code:(null===(i=e.response)||void 0===i?void 0:i.status)||500,code:(null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.code)||(null===(s=e.response)||void 0===s?void 0:s.status)||500,message:(null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)||e.message||"Unknown error",request_id:(null===(u=e.response)||void 0===u?void 0:null===(c=u.data)||void 0===c?void 0:c.request_id)||"",data:null})});let s=async(e,t,r)=>{let i="".concat(null!=r?r:"/api","/").concat(e.startsWith("/")?e.replace("/",""):e),n=new URLSearchParams;(null==t?void 0:t.params)&&Object.entries(t.params).forEach(e=>{let[t,r]=e;n.append(t,r)});let s=n.toString(),a=s?"".concat(i,"?").concat(s):i;try{var l,c,u,d,h;let e={...null==t?void 0:t.headers};e["Content-Type"]||(null==t?void 0:t.body)instanceof FormData||(e["Content-Type"]="application/json");let r=await fetch(a,{headers:e,method:null!==(l=null==t?void 0:t.method)&&void 0!==l?l:"GET",body:(null==t?void 0:t.data)?JSON.stringify(t.data):null==t?void 0:t.body,signal:null==t?void 0:t.signal}),i=await r.json();if(!r.ok){if(401===r.status){let e=(0,o.$)(!0),t=window.location.pathname+window.location.search;window.location.href="".concat(e,"/login?returnTo=").concat(encodeURIComponent(t))}if((null==i?void 0:i.status_code)&&(null==i?void 0:i.code))return Promise.reject(i);let e=(c=r.status,u=(null==i?void 0:i.code)||r.status,d=(null==i?void 0:i.message)||r.statusText,h=(null==i?void 0:i.request_id)||"",{status_code:c,code:u,message:d,request_id:h,data:null});return Promise.reject(e)}return i}catch(t){return console.log("commonFetch API ".concat(e," error"),t),Promise.reject(t)}}},99891:(e,t,r)=>{r.d(t,{AnalyticsProvider:()=>a,I:()=>s});var i=r(95155),o=r(12115),n=r(90063);let s=(0,o.createContext)(null);function a(e){let{children:t}=e;return(0,o.useEffect)(()=>{n.A.getInstance().init()},[]),(0,i.jsx)(s.Provider,{value:n.A.getInstance(),children:t})}}}]);